<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<!--  COPY THE CODE FROM HERE INTO SQUARESPACE-->
<form id="membership_form" action="http://localhost" method="post">
    <div id="infoTab">
        <h2>Info</h2>
        <p><label for="firstName">First Name *</label></p>
        <p><input placeholder="First name..." id="firstName" name="firstName" type="text" required></p>
        <p><label for="lastName">Last Name *</label></p>
        <p><input placeholder="Last name..." id="lastName" name="lastName" type="text" required></p>
        <p><label for="school">School</label></p>
        <p><input placeholder="School..." id="school" name="school" type="text"></p>
        <p><label for="program">Program & College (if you are a UofT student)</label></p>
        <p><input id="program" type="text" name="programAndCollege"></p>
        <p><label for="email">Email * (we will notify you of events and trips using this email)</label></p>
        <p><input id="email" type="email"  name="email" required></p>
        <p><label for="foundUtoc">How did you find UTOC? </label></p>
        <p><input id="foundUtoc" name="foundUtoc" type="text"></p>
        <p>Are you interested in family style events? *</p>
        <input type="radio" id="yes" value="yes" name="familyStyle" required>
        <label for="yes">Yes</label><br>
        <input type="radio" id="no" value="no" name="familyStyle" required>
        <label for="no">No</label><br>

        <br>

        <button type="button" onclick="toPayment()">Next</button>
    </div>

    <div id="paymentTab" style="display: none">
        <h2>Payment</h2>
        <p><label for="membership_type">Choose your membership type:</label></p>

        <p><select name="membership_type" id="membership_type">
            <option value="20">Student Membership $20.00 CAD</option>
            <option value="30">Regular Membership $30.00 CAD</option>
            <option value="40">Family Membership $40.00 CAD</option>
            <option value="10">Summer Membership $10.00 CAD</option>
        </select></p>

        <input type="hidden" id="orderId" name="orderId">

        <div id="paypal-button-container"></div>
    </div>


</form>


<script src="https://www.paypal.com/sdk/js?client-id=AVhTs5Ui8fjSnR5-CH-IZ2_NQvgyFYZHUEW-tYaBZKQS61gnrpc9rjc_4bVldcQklV1WPtswTRG_B-Hc&currency=CAD"
        data-sdk-integration-source="button-factory"></script>

<script>
  const membershipForm = document.getElementById("membership_form");

  function toPayment() {
    if (!membershipForm.checkValidity()) return;
    // Hide the current tab:
    document.getElementById("infoTab").style.display = "none";
    // Display the next tab
    document.getElementById("paymentTab").style.display = "inline";
  }

  paypal.Buttons({
    style: {
      shape: 'rect',
      color: 'blue',
      layout: 'vertical',
      label: 'paypal',

    },
    createOrder: function (data, actions) {
      const typeDropdown = document.getElementById("membership_type");

      return actions.order.create({
        purchase_units: [{
          amount: {
            value: typeDropdown.options[typeDropdown.selectedIndex].value
          }
        }]
      });
    },
    onApprove: function (data) {
      document.getElementById("orderId").value = data.orderID;
      membershipForm.submit();
    }
  }).render('#paypal-button-container');

</script>
<!-- COPY THE CODE UNTIL HERE INTO SQUARESPACE -->

</body>
</html>